<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_henchman_standing</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>1</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//colliding_with_player = false;
alerted = false;
range = 200;
spr_running = spr_henchman_running; //how can we load this dynamically
spr_idle = spr_henchman_standing; //TODO load dynamically
show_hp = false;

spawn_loot = false;
max_enemy_money_drop = 500;

enemy_level = ceil(random(20));
enemy_level_text_color = c_white;
enemy_health_color = make_color_rgb(186,157,125);

patrol = true;

hp = 100;
max_hp = 100;
has_shield = false;
shield_hp = 100;
max_shield_hp = 100;

damage_taken_show = 0;
damage_taken_y = 30;

if(random(20) &lt; 1){
    has_shield = true;    
}


if(random(20) &lt; 1){
    isChampion = true;
    //image_xscale = 2; image_yscale = 2;
    mycolor = make_color_rgb(250, 208, 0);
    var hp_m = floor(random_range(2, 5));
    max_hp *= hp_m;
    hp *= hp_m;
    
} else {
    isChampion = false;
    mycolor = make_color_rgb(202, 45, 36);
}

//show_debug_message(global.player_level);
/*
if(enemy_level &lt; (player_level - 3)){
    enemy_level_text_color = c_green;
} else if (enemy_level &gt; (player_level - 3) || enemy_level &lt; (player_level + 3)){
    enemy_level_text_color = c_white;
} else if (enemy_level &gt; (player_level + 3) || enemy_level &lt; (player_level + 7)){
    enemy_level_text_color = c_yellow;
} else {
    enemy_level_text_color = c_red;
}
*/
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>526</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>0</useapplyto>
        <exetype>1</exetype>
        <functionname>action_font</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>12</kind>
            <font>-1</font>
          </argument>
          <argument>
            <kind>4</kind>
            <string>2</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>524</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>0</useapplyto>
        <exetype>1</exetype>
        <functionname>action_color</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>13</kind>
            <string>16777215</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>show_debug_message('end alarm');
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(global.pause) exit;

if damage_taken_show &gt; 0 {
    damage_taken_show -= 1;
    damage_taken_y += 1;
} else {
    damage_taken_y = 30;
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>601</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_execute_script</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>9</kind>
            <script>move_basic</script>
          </argument>
          <argument>
            <kind>0</kind>
            <string></string>
          </argument>
          <argument>
            <kind>0</kind>
            <string></string>
          </argument>
          <argument>
            <kind>0</kind>
            <string></string>
          </argument>
          <argument>
            <kind>0</kind>
            <string></string>
          </argument>
          <argument>
            <kind>0</kind>
            <string></string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>601</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_execute_script</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>9</kind>
            <script>move_detected_player</script>
          </argument>
          <argument>
            <kind>0</kind>
            <string></string>
          </argument>
          <argument>
            <kind>0</kind>
            <string></string>
          </argument>
          <argument>
            <kind>0</kind>
            <string></string>
          </argument>
          <argument>
            <kind>0</kind>
            <string></string>
          </argument>
          <argument>
            <kind>0</kind>
            <string></string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_bullet">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>show_hp = true;

damage_taken_show = 30;
damage_taken = 0;
damage_taken_y = 30;

if(global.player_right){
    phy_position_x += 5;
} else {
    phy_position_x -= 5;
}

if(has_shield){
    shield_hp -= 10;
}

if(shield_hp == 0){
    has_shield = false;
}

if(!has_shield){
    hp -= global.current_damage;
    damage_taken = global.current_damage;
    text_x = x + random_range(-5, 5);
}

if(hp &lt;= 0){
              
    script_execute(money_spawn);    
    
//    part_particles_create(global.ps, x, y, global.pt_blood_explosion, 1000);
    instance_destroy();
}

{
    //Create 10 blood particles
    if(!has_shield){
        //TODO - not sure we should have blood in the game... if yes, remove this comment
        //part_particles_create(global.ps, x, y, global.pt_blood, 10);
    }
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>101</id>
        <kind>0</kind>
        <userelative>-1</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_move</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>000000000</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_collision">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//collide
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(has_shield){
    shield_p = (shield_hp / max_shield_hp) * 100;
}

hp_p = (hp / max_hp) * 100;

if(show_hp){
       draw_set_color(enemy_level_text_color);
       draw_healthbar(x-20, y-32, x + 20, y-27, hp_p, c_black, mycolor, mycolor, 0, true, false);
  //     draw_text(x - 28 , y-36, enemy_level);
       
     /*  draw_set_color(enemy_health_color);
       draw_set_font(open_sans_bold_8);
       draw_set_halign(fa_center);
       draw_text(x, y-52, "(" + string(hp) + "/" + string(max_hp) + ")");
*/
       if(has_shield){
           draw_healthbar(x-20, y-33, x + 20, y-32, shield_p, c_white, c_white, c_white, 0, false, false); 
       }
       
}
draw_sprite(sprite_index, image_index, x, y); //redraw the sprite

if(damage_taken_show &gt; 0){
    draw_set_color(c_white);
    draw_text(text_x, y - damage_taken_y , damage_taken);
}


if(alerted){
//TODO  - I don't like the way this looks 
//    draw_sprite(spr_alerted, 2, x, y - 50);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>-1</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>1</PhysicsObjectShape>
  <PhysicsObjectDensity>1</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.100000001490116</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>-1</PhysicsObjectKinematic>
  <PhysicsShapePoints>
    <point>0,0</point>
    <point>27,0</point>
    <point>27,32</point>
    <point>0,32</point>
  </PhysicsShapePoints>
</object>
